<% content_for :nav_content do %>
    <a href="/" class="breadcrumb">Domains</a>
    <a href="<%= domain_path(@domain) %>" class="breadcrumb"><%= @domain['name'] %></a>
    <a href="#!" class="breadcrumb"><%= @board.name %></a>
<% end %>

<h2>Summary for <%= @board.name %></h2>

<%= erb 'partials/table'.to_sym, :locals => { :table => @board.summary_table } %>

<a href="<%= board_issues_path(@domain, @board) %>" class="waves-effect waves-light btn">
  All Issues
</a>

<script type="text/javascript">
  var data;
  var chart;

  // Load the Visualization API and the piechart package.
  google.charts.load('current', {'packages': ['corechart']});

  // Set a callback to run when the Google Visualization API is loaded.
  google.charts.setOnLoadCallback(drawChart);

  // Callback that creates and populates a data table,
  // instantiates the pie chart, passes in the data and
  // draws it.
  function drawChart() {

    //data = google.visualization.arrayToDataTable(<%= @chart_data.to_json %>);

    var options = {
      title: 'Control Chart',
      hAxis: {title: 'Date', minValue: 0, maxValue: 15},
      vAxis: {title: 'Cycle Time', minValue: 0, maxValue: 15},
      legend: 'none'
    };

    //chart = new google.visualization.ScatterChart(document.getElementById('chart_div'));
    //google.visualization.events.addListener(chart, 'select', selectHandler);
    //chart.draw(data, options);
  }

  function selectHandler() {
    var selectedItem = chart.getSelection()[0];
    var key = data.getValue(selectedItem.row, 2);
    alert('The user selected ' + key);
  }

</script>

<script type="text/javascript">
  google.charts.load('current', {'packages':['corechart']});
  google.charts.setOnLoadCallback(drawChart2);

  function drawChart2() {
//    var data = new google.visualization.DataTable();
//    data.addColumn('date', 'Time of Day');
//    data.addColumn('number', 'Rating');
//
//    data.addRows([
//      [new Date(2015, 0, 1), 5],
//      [new Date(2015, 0, 2), 7]
//    ]);

    var data = new google.visualization.DataTable({
      cols: [{type: 'date'}, {type: 'number'}],
      rows: [
        {c: [{v: 'Date(2015, 0, 1)'}, {v: 5}]},
        {c: [{v: 'Date(2015, 0, 2)'}, {v: 7}]}
      ]
    });

    var data = new google.visualization.DataTable(<%= @chart_data.to_json %>);


    var options = {
      title: 'Rate the Day on a Scale of 1 to 10',
      width: 900,
      height: 500,
      hAxis: {
        format: 'M/d/yy',
        gridlines: {count: 15}
      },
      vAxis: {
        gridlines: {color: 'none'},
        minValue: 0
      }
    };

    var chart = new google.visualization.ScatterChart(document.getElementById('test_div'));

    chart.draw(data, options);
  }
</script>

<!--Div that will hold the pie chart-->
<div id="chart_div" style="height:460"></div>
</body>
<div id="test_div" style="height:460"></div>
</body>
